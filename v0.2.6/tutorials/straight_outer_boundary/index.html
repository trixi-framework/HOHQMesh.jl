<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Straight-sided outer boundary · HOHQMesh.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://trixi-framework.github.io/HOHQMesh.jl/stable/tutorials/straight_outer_boundary/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">HOHQMesh.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Interactive mesh generation</span><ul><li><a class="tocitem" href="../../interactive_overview/">Overview</a></li><li><a class="tocitem" href="../../guided-tour/">Guided tour</a></li><li><a class="tocitem" href="../../interactive-api/">API</a></li><li><a class="tocitem" href="../../CheatSheet/">Commands Cheat Sheet</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../introduction/">Overview</a></li><li class="is-active"><a class="tocitem" href>Straight-sided outer boundary</a><ul class="internal"><li><a class="tocitem" href="#Initialization"><span>Initialization</span></a></li><li><a class="tocitem" href="#Adjusting-project-parameters"><span>Adjusting project parameters</span></a></li><li><a class="tocitem" href="#Add-the-background-grid"><span>Add the background grid</span></a></li><li><a class="tocitem" href="#Add-the-inner-boundaries"><span>Add the inner boundaries</span></a></li><li><a class="tocitem" href="#Generate-the-mesh"><span>Generate the mesh</span></a></li><li><a class="tocitem" href="#Summary"><span>Summary</span></a></li></ul></li><li><a class="tocitem" href="../curved_outer_boundary/">Curved outer boundary</a></li><li><a class="tocitem" href="../spline_curves/">Spline curves</a></li><li><a class="tocitem" href="../create_edit_curves/">Creating and editing curves</a></li><li><a class="tocitem" href="../symmetric_mesh/">Symmetric mesh</a></li></ul></li><li><span class="tocitem">Advanced topics &amp; developers</span><ul><li><a class="tocitem" href="../../development/">Development</a></li><li><a class="tocitem" href="../../github-git/">GitHub &amp; Git</a></li><li><a class="tocitem" href="../../testing/">Testing</a></li></ul></li><li><a class="tocitem" href="../../reference/">Reference</a></li><li><a class="tocitem" href="../../authors/">Authors</a></li><li><a class="tocitem" href="../../contributing/">Contributing</a></li><li><a class="tocitem" href="../../license/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Straight-sided outer boundary</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Straight-sided outer boundary</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/trixi-framework/HOHQMesh.jl/blob/main/docs/src/tutorials/straight_outer_boundary.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Straight-sided-outer-boundary"><a class="docs-heading-anchor" href="#Straight-sided-outer-boundary">Straight-sided outer boundary</a><a id="Straight-sided-outer-boundary-1"></a><a class="docs-heading-anchor-permalink" href="#Straight-sided-outer-boundary" title="Permalink"></a></h1><p>The purpose of this tutorial is to demonstrate how to create an unstructured mesh on a rectangular domain that contains two circular inner boundaries. Further, we show how to adjust some of the default mesh parameters as well as the output mesh file format. The outer boundary, background grid and mesh will be visualized for quality inspection.</p><p>It provides details and clarification for the script <code>interactive_outer_box_two_circles.jl</code> from the <a href="https://github.com/trixi-framework/HOHQMesh.jl/tree/main/examples">examples/</a> folder.</p><h3 id="Synopsis"><a class="docs-heading-anchor" href="#Synopsis">Synopsis</a><a id="Synopsis-1"></a><a class="docs-heading-anchor-permalink" href="#Synopsis" title="Permalink"></a></h3><p>This tutorial demonstrates how to:</p><ul><li>Query and adjust the <code>RunParameters</code> of a project.</li><li>Define a rectangular outer boundary and set the background grid.</li><li>Visualize an interactive mesh project.</li><li>Add circular inner boundary curves.</li></ul><h2 id="Initialization"><a class="docs-heading-anchor" href="#Initialization">Initialization</a><a id="Initialization-1"></a><a class="docs-heading-anchor-permalink" href="#Initialization" title="Permalink"></a></h2><p>From a Julia REPL we load the HOHQMesh package as well as <a href="https://github.com/JuliaPlots/GLMakie.jl/">GLMakie</a>, a backend of <a href="https://github.com/JuliaPlots/Makie.jl/">Makie.jl</a>, to visualize the curves, mesh, etc. from the interactive tool.</p><pre><code class="language-julia hljs">julia&gt; using GLMakie, HOHQMesh</code></pre><p>Now we are ready to interactively generate unstructured quadrilateral meshes!</p><p>We create a new project with the name <code>&quot;box_two_circles&quot;</code> and assign <code>&quot;out&quot;</code> to be the folder where any output files from the mesh generation process will be saved. By default, the output files created by HOHQMesh will carry the same name as the project. For example, the resulting HOHQMesh control file from this tutorial will be named <code>box_two_circles.control</code>. If the folder <code>out</code> does not exist, it will be created automatically in the current file path.</p><pre><code class="language-julia hljs">box_project = newProject(&quot;box_two_circles&quot;, &quot;out&quot;)</code></pre><h2 id="Adjusting-project-parameters"><a class="docs-heading-anchor" href="#Adjusting-project-parameters">Adjusting project parameters</a><a id="Adjusting-project-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Adjusting-project-parameters" title="Permalink"></a></h2><p>When a new project is created it is filled with several default <code>RunParameters</code> such as the polynomial order used to represent curved boundaries or the mesh file format. These <code>RunParameters</code> can be queried and adjusted with appropriate getter/setter pairs, see <a href="../../interactive-api/#Controlling-the-mesh-generation">Controlling the mesh generation</a> for more details.</p><p>For the <code>box_project</code> we first query the current values for the polynomial order and the mesh output format</p><pre><code class="language-julia hljs">julia&gt; getPolynomialOrder(box_project)
5

julia&gt; getMeshFileFormat(box_project)
&quot;ISM-V2&quot;</code></pre><p>We change these quantities in the <code>box_project</code> with the corresponding setter functions. For this we will set the polynomial order to be <span>$4$</span> and the mesh file format to be <code>ABAQUS</code>. See the <a href="https://trixi-framework.github.io/Trixi.jl/stable/meshes/p4est_mesh/">P4est-based mesh</a> section of the <a href="https://github.com/trixi-framework/Trixi.jl">Trixi.jl</a> documentation for a detailed overview of this mesh file format.</p><pre><code class="language-julia hljs">setPolynomialOrder!(box_project, 4)
setMeshFileFormat!(box_project, &quot;ABAQUS&quot;)</code></pre><h2 id="Add-the-background-grid"><a class="docs-heading-anchor" href="#Add-the-background-grid">Add the background grid</a><a id="Add-the-background-grid-1"></a><a class="docs-heading-anchor-permalink" href="#Add-the-background-grid" title="Permalink"></a></h2><p>HOHQMesh requires a background grid for the mesh generation process. This background grid sets the base resolution of the desired mesh. HOHQMesh will automatically subdivide from this background grid near any curved boundaries.</p><p>The domain for this tutorial is a rectangular box with the bounds <span>$[0,30]\times[0,15]$</span>. Because no outer boundary curve is present there are two (equivalent) strategies for us to define the bounds of a rectangular domain and the size of the background grid:</p><ol><li>Set the lower left corner point of the domain <span>$(x_0, y_0)$</span>, define the element size in each spatial direction <span>$\Delta x$</span> and <span>$\Delta y$</span>, and the number of steps taken in each direction <span>$N_x, N_y$</span>. The resulting background grid will have the extent <span>$[x_0, x_0 + N_x \Delta x]$</span> by <span>$[y_0, y_0 + N_y \Delta y]$</span>. For this example, we set a background grid of Cartesian elements with size one in each dimension with the following commands<pre><code class="language-julia hljs">lower_left = [0.0, 0.0, 0.0]
spacing = [1.0, 1.0, 0.0]
num_intervals = [30, 15, 0]
addBackgroundGrid!(box_project, lower_left, spacing, num_intervals)</code></pre></li><li>Set the bounding box with extent values ordered as <code>[top, left, bottom, right]</code> and provide the number the number of steps in each direction. To set a background grid of Cartesian elements with size one in each dimension for the rectangular box <span>$[0,30]\times[0,15]$</span> we use<pre><code class="language-julia hljs">bounds = [15.0, 0.0, 0.0, 30.0]
N = [30, 15, 0]
addBackgroundGrid!(box_project, bounds, N)</code></pre></li></ol><p>Next, we visualize the <code>box_project</code> to ensure that the background grid has been added correctly.</p><pre><code class="language-julia hljs">plotProject!(box_project, GRID)</code></pre><p>We use the keyword and <code>GRID</code> to indicate that we want the background grid to be included in the visualization.</p><p><img src="https://user-images.githubusercontent.com/25242486/174775018-86936c6b-ba69-456e-9aaf-c5054a4aacbe.png" alt="background"/></p><h2 id="Add-the-inner-boundaries"><a class="docs-heading-anchor" href="#Add-the-inner-boundaries">Add the inner boundaries</a><a id="Add-the-inner-boundaries-1"></a><a class="docs-heading-anchor-permalink" href="#Add-the-inner-boundaries" title="Permalink"></a></h2><p>Next, we add the two circular inner boundary curves with different radii.</p><p>The first circle will have radius <span>$r=2$</span> and be centered at the point <span>$(4, 4)$</span>. We define this circular curve with the function <code>newCircularArcCurve</code> as follows</p><pre><code class="language-julia hljs">circle1 = newCircularArcCurve(&quot;circle1&quot;,       # curve name
                              [4.0, 4.0, 0.0], # circle center
                              2.0,             # circle radius
                              0.0,             # start angle
                              360.0,           # end angle
                              &quot;degrees&quot;)       # angle units</code></pre><p>We use <code>&quot;degrees&quot;</code> to set the angle bounds, but <code>&quot;radians&quot;</code> can also be used. The name of the curve stored in the dictionary <code>circle1</code> is assigned to be <code>&quot;circle1&quot;</code>. This curve name is also the label that HOHQMesh will give to this boundary curve in the resulting mesh file.</p><p>The new <code>circle1</code> curve is then added to the <code>box_project</code> as an inner boundary curve with</p><pre><code class="language-julia hljs">addCurveToInnerBoundary!(box_project, circle1, &quot;inner1&quot;)</code></pre><p>This inner boundary chain name <code>&quot;inner1&quot;</code> is used internally by HOHQMesh. The visualization of the background grid automatically detects that a curve has been added to the project and the plot is updated appropriately, as shown below. The chain for the inner boundary curve is called <code>&quot;inner1&quot;</code> and it contains a single curve <code>&quot;circle1&quot;</code> labeled in the figure by <code>1.1</code>.</p><p><img src="https://user-images.githubusercontent.com/25242486/174775027-62a094f7-bbba-4c1c-a389-99562c2e5fe2.png" alt="first_circle"/></p><p>With analogous steps we create another circular curve with radius <span>$r=4$</span>, centered at <span>$(20, 9)$</span> and add it as a second inner curve to the <code>box_project</code>. Note, for this curve we use radians for the angle units.</p><pre><code class="language-julia hljs">circle2 = newCircularArcCurve(&quot;circle2&quot;,        # curve name
                              [20.0, 9.0, 0.0], # circle center
                              4.0,              # circle radius
                              0.0,              # start angle
                              2.0 * pi,         # end angle
                              &quot;radians&quot;)        # angle units
addCurveToInnerBoundary!(box_project, circle2, &quot;inner2&quot;)</code></pre><p>Again, the <code>box_project</code> detects that a curve has been added to it and the visualization is automatically updated with the second circular curve. The chain for the second inner boundary curve is called <code>&quot;inner2&quot;</code> and it contains a single curve <code>&quot;circle2&quot;</code> labeled in the figure by <code>2.1</code>.</p><p><img src="https://user-images.githubusercontent.com/25242486/174775037-a9144f93-78da-48ae-976b-7cfaeca68240.png" alt="second_circle"/></p><h2 id="Generate-the-mesh"><a class="docs-heading-anchor" href="#Generate-the-mesh">Generate the mesh</a><a id="Generate-the-mesh-1"></a><a class="docs-heading-anchor-permalink" href="#Generate-the-mesh" title="Permalink"></a></h2><p>With the background grid and all inner boundary curves added to the <code>box_project</code> we can generate the mesh. This will output the following files to the <code>out</code> folder:</p><ul><li><code>box_two_circles.control</code>: A HOHQMesh control file for the current project.</li><li><code>box_two_circles.tec</code>: A TecPlot formatted file to visualize the mesh with other software, e.g., <a href="https://www.paraview.org/">ParaView</a>.</li><li><code>box_two_circles.inp</code>: A mesh file with format <code>ABAQUS</code> that was set above.</li></ul><p>To do this we execute the command</p><pre><code class="language-julia hljs">generate_mesh(box_project)

 *******************
 2D Mesh Statistics:
 *******************
    Total time             =    2.9116999999999997E-002
    Number of nodes        =          498
    Number of Edges        =          921
    Number of Elements     =          422
    Number of Subdivisions =            0

 Mesh Quality:
         Measure         Minimum         Maximum         Average  Acceptable Low Acceptable High       Reference
     Signed Area      0.34513977      1.15385313      0.91833886      0.00000000    999.99900000      1.00000000
    Aspect Ratio      1.00000004      1.71084672      1.08736698      1.00000000    999.99900000      1.00000000
       Condition      1.00000000      1.46547984      1.04928616      1.00000000      4.00000000      1.00000000
      Edge Ratio      1.00000006      2.43578615      1.16710823      1.00000000      4.00000000      1.00000000
        Jacobian      0.17854786      1.07210200      0.86801191      0.00000000    999.99900000      1.00000000
   Minimum Angle     50.57680338     89.99999787     83.84338772     40.00000000     90.00000000     90.00000000
   Maximum Angle     90.00000259    136.97085026     96.70176380     90.00000000    135.00000000     90.00000000
       Area Sign      1.00000000      1.00000000      1.00000000      1.00000000      1.00000000      1.00000000</code></pre><p>The call to <code>generate_mesh</code> also prints mesh quality statistics to the screen and updates the visualization. The background grid is <em>removed</em> from the visualization when the mesh is generated and the resulting mesh is visualized instead.</p><p><img src="https://user-images.githubusercontent.com/25242486/174775040-e4a04503-83f3-4f80-b087-972bd8dbb5e9.png" alt="final_circle"/></p><p>From a visual inspection we decide that we are satisfied with the mesh quality and resolution near the inner circular boundaries.</p><h2 id="Summary"><a class="docs-heading-anchor" href="#Summary">Summary</a><a id="Summary-1"></a><a class="docs-heading-anchor-permalink" href="#Summary" title="Permalink"></a></h2><p>In this tutorial we demonstrated how to:</p><ul><li>Query and adjust the <code>RunParameters</code> of a project.</li><li>Define a rectangular outer boundary and set the background grid.</li><li>Visualize an interactive mesh project.</li><li>Add circular inner boundary curves.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../introduction/">« Overview</a><a class="docs-footer-nextpage" href="../curved_outer_boundary/">Curved outer boundary »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Tuesday 25 June 2024 14:41">Tuesday 25 June 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
